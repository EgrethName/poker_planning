(function(t){function e(e){for(var s,i,r=e[0],c=e[1],l=e[2],d=0,f=[];d<r.length;d++)i=r[d],Object.prototype.hasOwnProperty.call(o,i)&&o[i]&&f.push(o[i][0]),o[i]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(t[s]=c[s]);u&&u(e);while(f.length)f.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var t,e=0;e<a.length;e++){for(var n=a[e],s=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(s=!1)}s&&(a.splice(e--,1),t=i(i.s=n[0]))}return t}var s={},o={1:0},a=[];function i(e){if(s[e])return s[e].exports;var n=s[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=s,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},i.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)i.d(n,s,function(e){return t[e]}.bind(null,s));return n},i.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=e,r=r.slice();for(var l=0;l<r.length;l++)e(r[l]);var u=c;a.push([0,0]),n()})({0:function(t,e,n){t.exports=n("cb6a")},"0418":function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container header-intro"},[n("div",{staticClass:"row"},[t._m(0),n("div",{staticClass:"col-lg-4 col-sm-2"}),n("div",{staticClass:"col-lg-4 col-sm-6"},[n("div",{staticClass:"btn-wrapper",attrs:{id:"disabled-wrapper",tabindex:"0"}},[n("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-login",modifiers:{"modal-login":!0}}],staticClass:"btn-intro",attrs:{disabled:""}},[t._v(" Log In ")])],1),n("div",{staticClass:"btn-wrapper",attrs:{id:"disabled-wrapper-2"}},[n("b-button",{staticClass:"btn-intro",attrs:{disabled:""}},[t._v(" Sign Up ")])],1),n("div",{staticClass:"btn-wrapper"},[n("b-button",{staticClass:"btn-intro",on:{click:t.logout}},[t._v(" Log out ")])],1),n("b-tooltip",{attrs:{target:"disabled-wrapper"}},[t._v(t._s(t.tooltipText))]),n("b-tooltip",{attrs:{target:"disabled-wrapper-2"}},[t._v(t._s(t.tooltipText))])],1),n("LoginModal",{attrs:{msg:"Log In"}})],1)])},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"col-lg-4 col-sm-4"},[n("p",{staticClass:"text-general"},[t._v("Poker Planning")])])}],a=n("479f"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"modal",attrs:{id:"modal-login",title:t.msg,"ok-title":"Submit","cancel-variant":"dark",centered:"","no-close-on-esc":"","no-close-on-backdrop":""},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{label:"Login","label-for":"login-input","invalid-feedback":"Login is required",state:t.loginState}},[n("b-form-input",{attrs:{id:"login-input",state:t.loginState,required:""},model:{value:t.login,callback:function(e){t.login=e},expression:"login"}})],1),n("b-form-group",{attrs:{label:"Password","label-for":"password-input","invalid-feedback":"Password is required",state:t.passwordState}},[n("b-form-input",{attrs:{id:"password-input",state:t.passwordState,type:"password",required:""},model:{value:t.password,callback:function(e){t.password=e},expression:"password"}})],1)],1)])],1)},r=[],c={data:function(){return{login:"",password:"",show:!0,loginState:null,passwordState:null}},props:{msg:String},methods:{checkFormValidity:function(){return this.loginState=!0,this.passwordState=!0,this.login||(this.loginState=!1),this.password||(this.passwordState=!1),this.loginState&&this.passwordState},resetModal:function(){this.login="",this.loginState=null,this.password="",this.passwordState=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;this.checkFormValidity()&&this.$nextTick((function(){t.$bvModal.hide("modal-login")}))}}},l=c,u=(n("d2d6"),n("2877")),d=Object(u["a"])(l,i,r,!1,null,null,null),f=d.exports,m={components:{LoginModal:f},props:{tooltipText:String},methods:{logout:function(){localStorage.removeItem("name"),window.location.assign("".concat(a["b"]))}}},p=m,v=(n("505a"),Object(u["a"])(p,s,o,!1,null,"dc54a27a",null));e["a"]=v.exports},"0e7d":function(t,e,n){},1:function(t,e){},2939:function(t,e,n){"use strict";n("57a2")},"2d75":function(t,e,n){},"35a0":function(t,e,n){"use strict";n("7575")},"479f":function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return r})),n.d(e,"a",(function(){return l}));n("1276"),n("ac1f");var s=n("bc3a"),o=n.n(s),a=n("806a"),i="https://".concat(a["a"]),r=o.a.create({baseURL:i}),c=window.location.href.split("/"),l=c[c.length-1]},"4e2d":function(t,e,n){},"505a":function(t,e,n){"use strict";n("b011")},"550b":function(t,e,n){"use strict";n("8b52")},"57a2":function(t,e,n){},"611c":function(t,e,n){},"68e4":function(t,e,n){"use strict";n("4e2d")},7575:function(t,e,n){},"7c7a":function(t,e,n){"use strict";n("9883")},"806a":function(t,e,n){"use strict";var s=function(t){switch(t){case"development":return"192.168.2.15";case"production":return window.location.host;case"test":default:return"localhost:8001"}};e["a"]=s(Object({NODE_ENV:"production",VUE_APP_IP:"192.168.2.15",BASE_URL:"/"}).VUE_APP_TEST_MODE||"production")},"8a39":function(t,e,n){"use strict";n("2d75")},"8b52":function(t,e,n){},9883:function(t,e,n){},a2f0:function(t,e,n){},b011:function(t,e,n){},bd8e:function(t,e,n){"use strict";n("0e7d")},c4b4:function(t,e,n){"use strict";n("611c")},cb6a:function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("a2f0");var s=n("2b0e"),o=n("5f5b"),a=n("b1e0"),i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"main-box",attrs:{id:"app"}},[n("div",{staticClass:"main-box__header"},[n("Header",{attrs:{tooltipText:"Coming soon..."}})],1),n("div",{staticClass:"wrapper container main-box__content"},[n("Game")],1),n("div",{staticClass:"main-box__footer"},[n("Footer")],1)])},r=[],c=n("0418"),l=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"game-container container",attrs:{id:"game-box"}},[n("div",{staticClass:"row game-header"},[n("h2",[t._v(t._s(t.roomName))])]),n("b-tabs",{staticClass:"game-tabs",attrs:{"content-class":"mt-3 game-tabs__tab",justified:""}},[n("b-tab",{attrs:{title:"Game",active:""}},[n("div",{staticClass:"row game-main"},[n("div",{staticClass:"col-lg-1"}),n("div",{staticClass:"col-lg-4 card-box"},[n("div",{staticClass:"name-header"},[n("h3",[t._v(" You are logged as: "+t._s(t.playerName))])]),n("b-overlay",{attrs:{id:"overlay-background",show:!t.isVoteActive,rounded:"sm",opacity:"1"},scopedSlots:t._u([{key:"overlay",fn:function(){return[n("div",{staticClass:"text-center"},[n("b-icon",{attrs:{icon:"stopwatch","font-scale":"3",animation:"fade"}}),n("p",{attrs:{id:"cancel-label"}},[t._v("Please, start a new vote")])],1)]},proxy:!0}])},[n("div",{staticClass:"card-holder"},t._l(t.cardSet,(function(e){return n("Card",{key:e,ref:"cards",refInFor:!0,attrs:{value:e},on:{voted:t.processVote}})})),1)]),n("div",{staticClass:"invitation-link"},[n("InvitationPanel",{attrs:{link:t.gameLink}})],1)],1),n("div",{staticClass:"col-lg-1"}),n("div",{staticClass:"col-lg-5 game-table-container"},[n("GameTable",{on:{voteCompleted:t.showStatsModalFromData}})],1),n("InputNameModal",{ref:"modalComponent",on:{clicked:t.enterTheGame},model:{value:t.submitNameSuccess,callback:function(e){t.submitNameSuccess=e},expression:"submitNameSuccess"}}),n("CompletedVoteModal",{ref:"statsModal",attrs:{stats:t.currentStats}})],1)]),n("b-tab",{attrs:{title:"Completed votes"}},[n("div",{staticClass:"row completed-votes"},[n("div",{staticClass:"col-lg-4"}),n("div",{staticClass:"col-lg-4 col-sm-12"},[n("div",{staticClass:"holder"},[t.completedVotes.length>0?t._l(t.completedVotes,(function(e){return n("CompletedVoteBadge",{key:e.id,ref:"completedVotes",refInFor:!0,attrs:{stats:e},on:{clicked:t.showStatsModal}})})):n("div",[n("h3",[t._v("No completed votes yet")])])],2)]),n("div",{staticClass:"col-lg-4"})])])],1)],1)},u=[],d=n("b85c"),f=n("5530"),m=(n("b0c0"),n("0644")),p=n.n(m),v=new s["default"],h=v,b=n("2f62"),g=n("479f"),_=n("806a"),S=n("8055"),V=n.n(S),w=V.a.connect("https://".concat(_["a"])),C=w,y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{class:t.classList,on:{click:t.setVote}},[n("h3",[t._v(t._s(t.value))])])])},k=[],O={data:function(){return{basicClass:"card-item",selectedClass:"card-item__selected",isSelected:this.selected}},computed:{classList:function(){return[this.isSelected?this.selectedClass:"",this.basicClass]}},props:{value:String,selected:Boolean},methods:{setVote:function(){this.$emit("voted",this.value)}}},x=O,$=(n("35a0"),n("2877")),j=Object($["a"])(x,y,k,!1,null,"43764a8c",null),P=j.exports,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"fix-height game-field"},[n("b-form-input",{staticClass:"input-name",attrs:{state:t.inputState,type:"text",placeholder:"Type current story title",disabled:t.isVoteActive,"v-on:keyup":t.flushInputState},model:{value:t.currentVoteTitle,callback:function(e){t.currentVoteTitle=e},expression:"currentVoteTitle"}}),n("b-button",{attrs:{variant:t.isVoteActive?"success":"primary",block:""},domProps:{textContent:t._s(t.isVoteActive?"End the vote":"Start a new vote")},on:{click:t.processVoteButton}}),n("div",{staticClass:"game-table"},[n("p",[t._v("Currently in the game:")]),n("div",{staticClass:"players-list"},[n("div",{staticClass:"column"},t._l(t.playersList,(function(t){return n("PlayerBadge",{key:t,ref:"players",refInFor:!0,attrs:{name:t}})})),1)])])],1)},I=[],M=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"player-badge"},[n("div",{class:[t.basicClass,t.stateClass]},[t._v(" "+t._s(t.name)+" "),t.isPending?n("b-icon",{staticClass:"icon-player",attrs:{icon:"arrow-clockwise",animation:"spin","font-scale":"1"}}):t._e()],1),t.isVotingCompleted?n("div",{staticClass:"mark-holder",domProps:{textContent:t._s(t.markValue)}}):t._e()])},N=[],T={data:function(){return{basicClass:"player"}},props:{name:String},computed:Object(f["a"])(Object(f["a"])({},Object(b["b"])({voteStatistics:function(t){return t.voteStatistics.votes},isVotingStarted:function(t){return t.isVoteActive},isVotingCompleted:function(t){return t.isVoteCompleted}})),{},{isVoted:function(){return this.name in this.voteStatistics},mark:function(){return this.voteStatistics[this.name]},stateClass:function(){return this.isVoted?"player__voted":""},isPending:function(){return!this.isVoted&&this.isVotingStarted},markValue:function(){return this.isVoted&&!this.isVotingStarted?this.mark:"?"}})},L=T,E=(n("d11f"),Object($["a"])(L,M,N,!1,null,"69d2b556",null)),D=E.exports,F={data:function(){return{inputState:null}},components:{PlayerBadge:D},computed:Object(f["a"])(Object(f["a"])({},Object(b["b"])({playersList:function(t){return t.playersList},isVoteActive:function(t){return t.isVoteActive},voteStatistics:function(t){return t.voteStatistics.votes},isVotingCompleted:function(t){return t.isVoteCompleted}})),{},{currentVoteTitle:{get:function(){return this.$store.state.activeVoteTitle},set:function(t){this.$store.commit("setActiveVoteTitle",t)}}}),methods:{processVoteButton:function(){if(this.isVoteActive)return this.endVote();this.startVote()},flushInputState:function(){this.inputState=null},cleanInputPlaceholder:function(){this.flushInputState(),this.currentVoteTitle=""},endVote:function(){this.$store.dispatch("endVote"),this.cleanInputPlaceholder()},startVote:function(){this.currentVoteTitle?(this.inputState=!0,this.$store.dispatch("startNewVote",this.currentVoteTitle)):this.inputState=!1}},created:function(){var t=this;h.$on("voteCompleted",(function(){t.cleanInputPlaceholder()}))}},R=F,G=(n("bd8e"),Object($["a"])(R,A,I,!1,null,"20a19034",null)),B=G.exports,U=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"modalName",attrs:{id:"modal-input-name",title:"Type your name","ok-title":"Send","no-close-on-esc":"","no-close-on-backdrop":""},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[n("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[n("b-form-group",{attrs:{label:"Name","label-for":"name-input","invalid-feedback":"Name is required",state:t.nameState}},[n("b-form-input",{attrs:{id:"name-input",state:t.nameState,required:""},model:{value:t.name,callback:function(e){t.name=e},expression:"name"}})],1)],1)])],1)},q=[],H={data:function(){return{name:"",nameState:null,submitNameSuccess:!1}},props:["value"],computed:Object(f["a"])({},Object(b["b"])({playerName:function(t){return t.playerName}})),methods:{checkFormValidity:function(){return this.name},resetModal:function(){this.name="",this.nameState=null,this.submitNameSuccess=!1},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){this.checkFormValidity()&&this.$emit("clicked",this.name)},show:function(){this.$refs.modalName.show()}},watch:{value:function(t){t?this.$bvModal.hide("modal-input-name"):this.resetModal()}}},z=H,J=Object($["a"])(z,U,q,!1,null,null,null),W=J.exports,Y=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("b-modal",{ref:"modal",attrs:{id:"modal-center",centered:"",title:t.title,"ok-only":"",size:"md",scrollable:"","content-class":"modal-stats-content"}},[n("div",{staticClass:"average-fan"},[n("p",{staticClass:"my-4"},[t._v("Average: "+t._s(t.average))])]),n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-6 col-sm-6 col-6 average-enjoyer border-right"},[n("h3",[t._v(" Votes: ")]),0===Object.keys(t.votes).length?n("div",[t._v("--")]):t._l(t.votes,(function(e,s){return n("div",{key:s},[t._v(t._s(s)+": "+t._s(e))])}))],2),n("div",{staticClass:"col-lg-6 col-sm-6 col-6 average-enjoyer"},[n("h3",[t._v(" Distribution: ")]),0===t.countedMarksLen?n("div",[t._v("--")]):t._l(t.countedMarks,(function(e,s){return n("div",{key:s},[t._v(t._s(s)+": "+t._s(e)+" "+t._s(t.voteDescr(e)))])}))],2)]),n("div",{staticClass:"chart"},[n("PieChart",{attrs:{data:t.counterMarksAsList}})],1)])],1)},K=[],Q=n("1da1"),X=n("3835"),Z=(n("96cf"),n("b680"),n("07ac"),n("4fad"),n("d81d"),n("4de4"),n("b64b"),n("d3b7"),n("890b")),tt=n.n(Z),et=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("svg",{attrs:{width:t.width,height:t.height}})},nt=[],st=(n("99af"),n("5698")),ot={data:function(){return{width:268,height:268,arc:null}},mounted:function(){var t=st.select(this.$el),e=+t.attr("width"),n=+t.attr("height"),s={top:20,left:0,bottom:30,right:0},o=e-(s.left+s.right),a=n-(s.top+s.bottom);this.chartLayer=t.append("g").attr("transform","translate(".concat(s.left,", ").concat(s.top,")")),this.arc=st.arc().outerRadius(a/2).innerRadius(a/4).padAngle(.03).cornerRadius(8),this.pieG=this.chartLayer.append("g").attr("transform","translate(".concat(o/2,", ").concat(a/2,")")),this.drawChart(this.data)},props:["data"],watch:{data:function(t){this.drawChart(t)}},methods:{drawChart:function(t){var e=this.arc,n=st.pie().sort(null).value((function(t){return t.value}))(t),s=this.pieG.selectAll(".arc").data(n);s.select("path").attr("d",this.arc);var o=s.enter().append("g").classed("arc",!0);o.append("path").attr("d",this.arc).attr("id",(function(t,e){return"arc-"+e})).attr("stroke","gray").attr("fill",(function(){return st.interpolateCool(Math.random())})),o.append("text").attr("transform",(function(t){return"translate("+e.centroid(t)+")"})).style("text-anchor","middle").style("font-size",20).style("font-weight",600).text((function(t){return t.data.name}))}}},at=ot,it=Object($["a"])(at,et,nt,!1,null,null,null),rt=it.exports;s["default"].use(tt.a);var ct={components:{PieChart:rt},data:function(){return{width:200,height:200}},props:{stats:Object},computed:{title:function(){return this.stats.title?this.stats.title:""},average:function(){return parseFloat(this.stats.average).toFixed()},votes:function(){return this.stats.votes},uniqueVotes:function(){var t=Object.values(this.stats.votes);return t},votesAsList:function(){var t=Object.entries(this.votes);return t.map((function(t){return{name:t[0],value:t[1]}}))},countedMarks:function(){for(var t={},e=0,n=Object.entries(this.votes);e<n.length;e++){var s=Object(X["a"])(n[e],2),o=(s[0],s[1]);o in t?t["".concat(o)]+=1:t["".concat(o)]=1}return t},countedMarksLen:function(){var t=Object.keys(this.countedMarks).filter((function(t){return"?"!==t})),e=Object.keys(t).length;return 1===e&&this.triggerConfetti(),e},counterMarksAsList:function(){var t=Object.entries(this.countedMarks);return t.map((function(t){return{name:t[0],value:t[1]}}))}},methods:{show:function(){this.$refs.modal.show()},hide:function(){this.$refs.modal.hide()},voteDescr:function(t){return"1"==t?"vote":"votes"},triggerConfetti:function(){var t=this;return Object(Q["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.$confetti.start(),e.next=3,new Promise((function(t){return setTimeout(t,2e3)}));case 3:t.$confetti.stop();case 4:case"end":return e.stop()}}),e)})))()}}},lt=ct,ut=(n("550b"),Object($["a"])(lt,Y,K,!1,null,null,null)),dt=ut.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("button",{staticClass:"completed-vote-badge",on:{click:t.onClick}},[t._v(" "+t._s(t.title)+" ")])])},mt=[],pt={props:{stats:Object},computed:{title:function(){return this.stats.title},id:function(){return this.stats.id}},methods:{onClick:function(){this.$emit("clicked",this.id)}}},vt=pt,ht=(n("c4b4"),Object($["a"])(vt,ft,mt,!1,null,"51cd7b96",null)),bt=ht.exports,gt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"share-input"},[t._m(0),n("b-input-group",{scopedSlots:t._u([{key:"append",fn:function(){return[n("b-input-group-text",{staticClass:"copy-button",on:{click:function(e){return e.stopPropagation(),e.preventDefault(),t.copyToClipboard(e)}}},[n("b-icon",{attrs:{icon:"clipboard"}})],1)]},proxy:!0}])},[n("b-form-input",{attrs:{id:"input-link",onClick:"this.select();",readonly:""},model:{value:t.link,callback:function(e){t.link=e},expression:"link"}})],1)],1)},_t=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"invitation"}},[n("h5",[t._v("Invite more people!")])])}],St={props:{link:String},methods:{copyToClipboard:function(){var t=document.querySelector("#input-link");t.setAttribute("type","text"),t.select(),document.execCommand("copy"),window.getSelection().removeAllRanges()}}},Vt=St,wt=(n("8a39"),Object($["a"])(Vt,gt,_t,!1,null,"2a885ade",null)),Ct=wt.exports,yt={data:function(){return{name:"",players:[],flags:{isVoteDone:!1,isVoteStarted:!1},cards:null,passwordState:null,submitNameSuccess:!1,currentStats:{id:"",title:"",votes:{},average:0}}},props:{},components:{Card:P,GameTable:B,InputNameModal:W,CompletedVoteModal:dt,CompletedVoteBadge:bt,InvitationPanel:Ct},computed:Object(f["a"])({cardSet:function(){return["0","1","2","3","5","8","13","21","34","55","89","âˆž","?"]}},Object(b["b"])({playerName:function(t){return t.playerName},sessionId:function(t){return t.sessionId},roomName:function(t){return t.roomName},completedVotes:function(t){return t.completedVotes},wsSessionId:function(t){return t.wsSessionId},isVoteActive:function(t){return t.isVoteActive},lastVoteResults:function(t){return t.voteStatistics},gameLink:function(t){return t.gameLink}})),methods:{enterTheGame:function(t){var e=this;g["c"].post("/".concat(this.sessionId,"/join_game"),{user_name:t,ws_sid:this.wsSessionId}).then((function(){e.submitNameSuccess=!0,localStorage.name=t,e.$store.commit("setPlayerName",t),e.$store.dispatch("getAllPlayers")})).catch((function(){e.showAlert(),e.submitNameSuccess=!1}))},processVote:function(t){this.$store.dispatch("sendVote",t);var e,n=Object(d["a"])(this.$refs.cards);try{for(n.s();!(e=n.n()).done;){var s=e.value;s.value===t?s.isSelected=!0:s.isSelected=!1}}catch(o){n.e(o)}finally{n.f()}},clearCardVotes:function(){var t,e=Object(d["a"])(this.$refs.cards);try{for(e.s();!(t=e.n()).done;){var n=t.value;n.isSelected=!1}}catch(s){e.e(s)}finally{e.f()}},showStatsModalFromData:function(t){this.currentStats=p()(t),this.$refs.statsModal.show()},showStatsModal:function(t){var e,n={},s=Object(d["a"])(this.completedVotes);try{for(s.s();!(e=s.n()).done;){var o=e.value;if(o.id===t){n=p()(o);break}}}catch(a){s.e(a)}finally{s.f()}this.currentStats=n,this.$refs.statsModal.show()},hideStatsModal:function(){this.$refs.statsModal.hide()},scrollToEnd:function(){var t=document.getElementById("game-box");t.scrollTop=t.scrollHeight-t.clientHeight}},mounted:function(){var t=this;C.on("connect",(function(){t.$store.commit("setWSSessionId",C.id),localStorage.name?(t.$store.commit("setPlayerName",localStorage.name),t.enterTheGame(localStorage.name)):t.$refs.modalComponent.show()})),this.$root.$on("shown",(function(e,n){n&&t.scrollToEnd()}))},watch:{isVoteActive:function(t){t||this.clearCardVotes()}},created:function(){var t=this;this.$store.dispatch("activate"),this.$store.dispatch("getSessionInfo"),h.$on("voteStatsAvailable",(function(e){t.showStatsModalFromData(e)})),h.$on("newVoteStarted",(function(){t.hideStatsModal()}))}},kt=yt,Ot=(n("68e4"),n("f986"),Object($["a"])(kt,l,u,!1,null,"1ffc67a6",null)),xt=Ot.exports,$t=n("fd2d"),jt={name:"",components:{Header:c["a"],Game:xt,Footer:$t["a"]}},Pt=jt,At=(n("7c7a"),Object($["a"])(Pt,i,r,!1,null,null,null)),It=At.exports;s["default"].use(b["a"]);var Mt=new b["a"].Store({state:{playersList:["Player1","Player2","Player3"],playerName:"",isVoteActive:!1,isVoteCompleted:!1,voteStatistics:{id:"",title:"",average:0,votes:{}},isVoteSet:!1,sessionId:g["a"],wsSessionId:C.id,completedVotes:[],roomName:"",activeVoteTitle:"",gameLink:window.location.href},mutations:{setSessionId:function(t,e){t.sessionId=e},setPlayersList:function(t,e){t.playersList=e},addNewUser:function(t,e){-1===t.playersList.indexOf(e)&&t.playersList.push(e)},removeUser:function(t,e){t.playersList=t.playersList.filter((function(t){return t!==e}))},setVotes:function(t,e){t.voteStatistics.votes=Object.assign({},t.voteStatistics.votes,e)},clearVoteStats:function(t){t.voteStatistics.votes={}},setVoteActive:function(t,e){t.isVoteActive=e},setVoteCompleted:function(t,e){t.isVoteCompleted=e},setInitialCompletedVotes:function(t,e){t.completedVotes=p()(e)},setVoteStats:function(t,e){t.completedVotes.push(e)},setVoteSet:function(t,e){t.isVoteSet=e},setPlayerName:function(t,e){t.playerName=e},setRoomName:function(t,e){t.roomName=e},setActiveVoteTitle:function(t,e){t.activeVoteTitle=e},setWSSessionId:function(t,e){t.wsSessionId=e}},actions:{getAllPlayers:function(t){var e=t.commit,n=t.state;g["c"].get("/".concat(n.sessionId,"/users")).then((function(t){var n=t.data;e("setPlayersList",n.session_users)}))},getAllVotes:function(t){var e=t.commit,n=t.state;g["c"].get("".concat(n.sessionId,"/current_votes")).then((function(t){var n=t.data;e("setVotes",n)}))},endVote:function(t){var e=t.commit,n=t.state;return new Promise((function(t,s){g["c"].post("".concat(n.sessionId,"/end_vote")).then((function(n){var s=n.data;e("setVoteActive",!1),e("setVoteCompleted",!0),t(s.statistics)})).catch((function(){return s("Cannot end the game")}))}))},sendVote:function(t,e){var n=t.commit,s=t.state,o=t.dispatch;g["c"].post("".concat(s.sessionId,"/vote"),{user_name:s.playerName,vote_value:e}).then((function(){o("getAllVotes"),n("setVoteSet")}))},startNewVote:function(t,e){var n=t.commit,s=t.state;g["c"].post("".concat(s.sessionId,"/new_vote"),{title:e}).then((function(){n("clearVoteStats",!0),n("setVoteActive",!0),n("setVoteCompleted",!1)})).catch((function(){n("setVoteActive",!1),n("setVoteCompleted",!1)}))},getSessionInfo:function(t){var e=t.commit,n=t.state,s=t.dispatch;g["c"].get("".concat(n.sessionId,"/info")).then((function(t){var n=t.data;e("setRoomName",n.session_name),e("setSessionId",n.session_id),e("setPlayersList",n.session_users),e("setInitialCompletedVotes",n.completed_votes),n.active_sessions.length&&(e("setVoteActive",!0),e("setActiveVoteTitle",n.active_sessions[0]),s("getAllVotes"))})).catch((function(t){console.log("session info error",t)}))},activate:function(t){var e=t.commit;C.on("got_new_vote",(function(t){e("setVotes",t)})),C.on("new_user_joined",(function(t){e("addNewUser",t)})),C.on("user_left",(function(t){e("removeUser",t)})),C.on("new_vote_started",(function(t){e("setActiveVoteTitle",t),e("clearVoteStats",!0),e("setVoteActive",!0),e("setVoteCompleted",!1),h.$emit("newVoteStarted")})),C.on("vote_completed",(function(t){e("setVoteActive",!1),e("setVoteCompleted",!0),e("setVoteStats",t),h.$emit("voteStatsAvailable",t),h.$emit("voteCompleted")}))},resolveAfter2Seconds:function(){return new Promise((function(t){setTimeout((function(){t("resolved")}),2e3)}))}},getters:{getCompletedVotes:function(t){return t.completedVotes}},modules:{}});n("f9e3"),n("2dd8");s["default"].config.productionTip=!1,s["default"].use(o["a"]),s["default"].use(a["a"]),new s["default"]({store:Mt,render:function(t){return t(It)}}).$mount("#app")},d11f:function(t,e,n){"use strict";n("de61")},d2b4:function(t,e,n){},d2d6:function(t,e,n){"use strict";n("f73b")},de61:function(t,e,n){},f73b:function(t,e,n){},f986:function(t,e,n){"use strict";n("d2b4")},fd2d:function(t,e,n){"use strict";var s=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},o=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"footer-intro"},[n("div",{staticClass:"container"},[n("div",{staticClass:"row"},[n("div",{staticClass:"col-lg-4"}),n("div",{staticClass:"col-lg-4 col-sm-12"},[t._v(" Copyright "),n("a",{attrs:{href:"https://github.com/egrethname",target:"blank"}},[t._v("@Egreth")]),t._v(", 2021 ")]),n("div",{staticClass:"col-lg-4"})])])])}],a={},i=a,r=(n("2939"),n("2877")),c=Object(r["a"])(i,s,o,!1,null,"7acc47bf",null);e["a"]=c.exports}});
//# sourceMappingURL=game.6f77d8ea.js.map